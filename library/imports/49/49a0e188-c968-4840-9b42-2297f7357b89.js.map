{"version":3,"sources":["assets/script/ItemList.js"],"names":["Item","cc","Class","name","properties","id","itemName","itemPrice","iconSF","SpriteFrame","gameCardData","Component","Count","Prefab","onLoad","CanvasNode","find","log","prefabPath","root","forEach","item","loader","loadRes","errorMessage","prefab","newMyPrefab","instantiate","addChild","buttonBG","getChildByName","newX","width","console","height","setPosition","getComponent","init"],"mappings":"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","sourceRoot":"/","sourcesContent":["var Item = cc.Class({\n    name: 'Item',\n    properties: {\n        id: 0,\n        itemName: '',\n        itemPrice: 0,\n        iconSF: cc.SpriteFrame\n    }\n});\n\nvar gameCardData = [\n    {\n        id:1,\n        itemName: \"遊戲1\",\n        itemPrice: '',\n        iconSF: \"image/cards/cardA\",\n    },\n    {\n        id:2,\n        itemName: \"遊戲2\",\n        itemPrice: '',\n        iconSF: \"image/cards/cardB\",\n    },\n    {\n        id:3,\n        itemName: \"遊戲3\",\n        itemPrice: '',\n        iconSF: \"image/cards/cardA\",\n    },\n    {\n        id:4,\n        itemName: \"遊戲4\",\n        itemPrice: '',\n        iconSF: \"image/cards/cardB\",\n    },\n    {\n        id:5,\n        itemName: \"遊戲5\",\n        itemPrice: '',\n        iconSF: \"image/cards/cardA\",\n    },\n    \n  ];\n\n\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // items: {\n        //     default: [],\n        //     type: Item\n        // },\n        Count: 0,\n        Item: cc.Prefab\n    },\n    onLoad () {\n\n        //我們先動態取得Canvas\n        var CanvasNode = cc.find( 'scrollview/view/content' );\n        if( !CanvasNode ) { cc.log( '找不到Canvas畫布，請確認你的場景裡有Canvas' ); return; } \n\n        var prefabPath = 'Item';\n\n        //這邊先將 this 指標存到另一個變數, 在別的方法裡this是會被改變的\n        var root = this; \n            \n        gameCardData.forEach(item => {\n            cc.loader.loadRes(\"Item\", function (errorMessage, prefab) {\n\n                if( errorMessage ) { cc.log( '載入Prefab失敗, 原因:' + errorMessage ); return; }\n                if( !( prefab instanceof cc.Prefab ) ) { cc.log( '你載入的不是Prefab, 你做了什麼事?' ); return; } //這個是型別的檢查\n                \n                root.Count++;\n                \n                //接著，我們就可以進行實例化了\n                var newMyPrefab = cc.instantiate( prefab );\n\n                //我們先將這個建立出來的Prefab加入畫布裡\n                CanvasNode.addChild( newMyPrefab );\n\n                //我們要開始設定位置，因為當時在Prefab我們沒有指定最外層的大小\n                //所以這邊我們要取得在MyPrefab中，我們加入的 \"SplitButtons_01\" 這張圖片的高度\n                var buttonBG = newMyPrefab.getChildByName( 'bg' );\n                if( !buttonBG ) { cc.log('找不到指定名稱的Node, 是不是哪裡搞錯了？'); return; }\n\n                //所以，y軸就是利用計數器乘上圖片的高度，再加上10額外邊界後，再減去場景的高度除以二\n                var newX = (  buttonBG.width ) + (root.Count*100) - 750;\n                //減去場景高度這個動作，是為了讓每點擊一次按鈕，我們的Prefab就一直往上產生\n                \n\n                console.log(CanvasNode.height);\n                //設定位置，這邊x軸不變\n                newMyPrefab.setPosition( newX, -150 );\n\n                newMyPrefab.getComponent('ItemTemplate').init({\n                    id: item.id,\n                    itemName: item.itemName,\n                    itemPrice: item.itemPrice,\n                    iconSF: item.iconSF,\n                });\n            });\n                \n        });\n    }\n});"]}