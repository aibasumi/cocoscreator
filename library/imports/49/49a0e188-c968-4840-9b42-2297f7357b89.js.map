{"version":3,"sources":["assets/script/ItemList.js"],"names":["Item","cc","Class","name","properties","id","itemName","itemPrice","iconSF","SpriteFrame","coinboard","Component","Count","itemPrefab","Prefab","onLoad","CanvasNode","find","log","prefabPath","root","onResourceLoaded","errorMessage","loadedResource","newMyPrefab","instantiate","addChild","buttonBG","getChildByName","newX","width","console","setPosition","getComponent","init","i","loader","loadRes"],"mappings":";;;;;;AAAA,IAAIA,IAAI,GAAGC,EAAE,CAACC,KAAH,CAAS;AAChBC,EAAAA,IAAI,EAAE,MADU;AAEhBC,EAAAA,UAAU,EAAE;AACRC,IAAAA,EAAE,EAAE,CADI;AAERC,IAAAA,QAAQ,EAAE,EAFF;AAGRC,IAAAA,SAAS,EAAE,CAHH;AAIRC,IAAAA,MAAM,EAAEP,EAAE,CAACQ;AAJH;AAFI,CAAT,CAAX;AAUA,IAAIC,SAAS,GAAG,CACZ;AACEJ,EAAAA,QAAQ,EAAE,MADZ;AAEEC,EAAAA,SAAS,EAAE,SAFb;AAGEC,EAAAA,MAAM,EAAE;AAHV,CADY,CAAhB;AAWAP,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACU,SADP;AAELP,EAAAA,UAAU,EAAE;AACR;AACA;AACA;AACA;AACAQ,IAAAA,KAAK,EAAE,CALC;AAMRC,IAAAA,UAAU,EAAEZ,EAAE,CAACa;AANP,GAFP;AAULC,EAAAA,MAVK,oBAUK;AAEN;AACA,QAAIC,UAAU,GAAGf,EAAE,CAACgB,IAAH,CAAS,yBAAT,CAAjB;;AACA,QAAI,CAACD,UAAL,EAAkB;AAAEf,MAAAA,EAAE,CAACiB,GAAH,CAAQ,6BAAR;AAAyC;AAAS;;AAEtE,QAAIC,UAAU,GAAG,MAAjB,CANM,CAQL;;AACA,QAAIC,IAAI,GAAG,IAAX,CATK,CAWN;AACI;;AACA,QAAIC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAUC,YAAV,EAAwBC,cAAxB,EACvB;AACIH,MAAAA,IAAI,CAACR,KAAL,GADJ,CAGI;;AACA,UAAIU,YAAJ,EAAmB;AAAErB,QAAAA,EAAE,CAACiB,GAAH,CAAQ,oBAAoBI,YAA5B;AAA4C;AAAS;;AAC1E,UAAI,EAAGC,cAAc,YAAYtB,EAAE,CAACa,MAAhC,CAAJ,EAA+C;AAAEb,QAAAA,EAAE,CAACiB,GAAH,CAAQ,uBAAR;AAAmC;AAAS,OALjG,CAKkG;AAG9F;;;AACA,UAAIM,WAAW,GAAGvB,EAAE,CAACwB,WAAH,CAAgBF,cAAhB,CAAlB,CATJ,CAWI;;AACAP,MAAAA,UAAU,CAACU,QAAX,CAAqBF,WAArB,EAZJ,CAcI;AACA;;AACA,UAAIG,QAAQ,GAAGH,WAAW,CAACI,cAAZ,CAA4B,IAA5B,CAAf;;AACA,UAAI,CAACD,QAAL,EAAgB;AAAE1B,QAAAA,EAAE,CAACiB,GAAH,CAAO,yBAAP;AAAmC;AAAS,OAjBlE,CAmBI;;;AACA,UAAIW,IAAI,GAAMF,QAAQ,CAACG,KAAZ,GAAuBV,IAAI,CAACR,KAAL,GAAW,GAAlC,GAAyC,GAApD,CApBJ,CAqBI;;AAGAmB,MAAAA,OAAO,CAACb,GAAR,CAAYW,IAAZ,EAxBJ,CAyBI;;AACAL,MAAAA,WAAW,CAACQ,WAAZ,CAAyBH,IAAzB,EAA+B,CAAC,GAAhC;AAGAL,MAAAA,WAAW,CAACS,YAAZ,CAAyB,cAAzB,EAAyCC,IAAzC,CAA8C;AAC1C7B,QAAAA,EAAE,EAAE,MADsC;AAE1CC,QAAAA,QAAQ,EAAE,MAFgC;AAG1CC,QAAAA,SAAS,EAAE,UAH+B;AAI1CC,QAAAA,MAAM,EAAE;AAJkC,OAA9C;AAYH,KA1CD,CAbE,CAyDF;AACA;;;AAEJ,SAAK,IAAI2B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwB,EAAEA,CAA1B,EAA6B;AAEzBlC,MAAAA,EAAE,CAACmC,MAAH,CAAUC,OAAV,CAAmBlB,UAAnB,EAA+BE,gBAA/B,EAFyB,CAGzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ;AAnFI,CAAT","sourceRoot":"/","sourcesContent":["var Item = cc.Class({\n    name: 'Item',\n    properties: {\n        id: 0,\n        itemName: '',\n        itemPrice: 0,\n        iconSF: cc.SpriteFrame\n    }\n});\n\nvar coinboard = [\n    {\n      itemName: \"尊榮禮包\",\n      itemPrice: 280000000,\n      iconSF: \"images/cards/cardA\",\n    },\n    \n  ];\n\n\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // items: {\n        //     default: [],\n        //     type: Item\n        // },\n        Count: 0,\n        itemPrefab: cc.Prefab\n    },\n    onLoad () {\n\n        //我們先動態取得Canvas\n        var CanvasNode = cc.find( 'scrollview/view/content' );\n        if( !CanvasNode ) { cc.log( '找不到Canvas畫布，請確認你的場景裡有Canvas' ); return; } \n\n        var prefabPath = 'Item';\n\n         //這邊先將 this 指標存到另一個變數, 在別的方法裡this是會被改變的\n         var root = this; \n\n        //這邊我們新增一個私有方法，來做為載入Prefab時的方法\n            //(當然你也可以直接寫在loadRes參數上，我只是覺得這樣比較容易看清楚)\n            var onResourceLoaded = function( errorMessage, loadedResource)\n            {\n                root.Count++;\n\n                //一樣，養成檢查的好習慣\n                if( errorMessage ) { cc.log( '載入Prefab失敗, 原因:' + errorMessage ); return; }\n                if( !( loadedResource instanceof cc.Prefab ) ) { cc.log( '你載入的不是Prefab, 你做了什麼事?' ); return; } //這個是型別的檢查\n              \n                \n                //接著，我們就可以進行實例化了\n                var newMyPrefab = cc.instantiate( loadedResource );\n\n                //我們先將這個建立出來的Prefab加入畫布裡\n                CanvasNode.addChild( newMyPrefab );\n\n                //我們要開始設定位置，因為當時在Prefab我們沒有指定最外層的大小\n                //所以這邊我們要取得在MyPrefab中，我們加入的 \"SplitButtons_01\" 這張圖片的高度\n                var buttonBG = newMyPrefab.getChildByName( 'bg' );\n                if( !buttonBG ) { cc.log('找不到指定名稱的Node, 是不是哪裡搞錯了？'); return; }\n\n                //所以，y軸就是利用計數器乘上圖片的高度，再加上10額外邊界後，再減去場景的高度除以二\n                var newX = (  buttonBG.width ) + (root.Count*100) - 750;\n                //減去場景高度這個動作，是為了讓每點擊一次按鈕，我們的Prefab就一直往上產生\n                \n\n                console.log(newX);\n                //設定位置，這邊x軸不變\n                newMyPrefab.setPosition( newX, -150 );\n\n\n                newMyPrefab.getComponent('ItemTemplate').init({\n                    id: '1111',\n                    itemName: 'test',\n                    itemPrice: 'dfsdfsdf',\n                    iconSF: 'image/cards/cardA'\n                });\n\n                \n\n\n\n\n            };\n            \n            //這邊才是真的使用cc.loader進行載入，並且呼叫我們上面寫的方法\n            //cc.loader.loadRes( prefabPath, onResourceLoaded );\n\n        for (var i = 0; i < 10; ++i) {\n\n            cc.loader.loadRes( prefabPath, onResourceLoaded );\n            // var item = cc.instantiate(this.prefabPath);\n            // var data = this.items[i];\n            // this.node.addChild(item);\n            // newMyPrefab.getComponent('ItemTemplate').init({\n            //     id: '1111',\n            //     itemName: 'test',\n            //     itemPrice: 'dfsdfsdf',\n            //     iconSF: data.iconSF\n            // });\n        }\n    }\n});"]}